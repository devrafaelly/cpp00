NAME		:= megaphone

CPP			:= c++
CPPFLAGS 	:= -Wall -Wextra -Werror -std=c++98

# Directories
OBJ_DIR		:= .build

# Colors
GREEN 		:= \033[0;32m
YELLOW		:= \033[0;33m
RED			:= \033[0;31m
BLUE		:= \033[0;34m
RESET		:= \033[0m

# Files
SRC			:= megaphone.cpp
OBJ			:= $(SRCS:%.cpp=$(OBJ_DIR)/%.o)

$(NAME): $(OBJ)
	@echo "$(YELLOW)ðŸ”§ Linking objects...$(RESET)"
	@$(CPP) $(CPPFLAGS) $(OBJ) -o $(NAME)
	@echo "$(GREEN)âœ… $(NAME) built successfully$(RESET)"

$(OBJ_DIR)/%.o: %.cpp
	@mkdir -p $(dir $@)
	@echo "$(BLUE)Compiling $<$(RESET)"
	@$(CPP) $(CPPFLAGS) -c $< -o $@

# rules
all: $(NAME)

clean:
	@rm -rf $(OBJ_DIR)
	@echo "$(RED)ðŸ§´ Object files removed.$(RESET)"

fclean: clean
	@rm -f $(NAME)
	@echo "$(RED)ðŸ§¼ Everything cleaned$(RESET)"

re: fclean all

.PHONY: all clean fclean re